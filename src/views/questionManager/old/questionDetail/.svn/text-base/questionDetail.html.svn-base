<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>

		<div id="bodybox">
			<div style='width:60%;margin-left: 17%;padding: 30px;border: solid #999999 1px;'>
				<el-form :model='headFormStore.headFormData.data' ref='headform' label-width='65px' :rules='headFormStore.headFormData.rules'>
					<el-form-item label='' prop='title'>
						<el-input v-model="headFormStore.headFormData.data.title" placeholder='请输入问卷标题'></el-input>
					</el-form-item>
					<el-form-item label='' prop='describe'>
						<el-input type='textarea' v-model='headFormStore.headFormData.data.describe' placeholder='请输入问卷描述'></el-input>
					</el-form-item>
				</el-form>
				<template v-for=" (q,index) in questMainFormStore.questFormData.data.question">
					<div :key='index'>
						<div style="border: dashed #F0F0F0 1px;" @click="activeshow(index)" v-show="activeIndex != index">
							<el-form label-width='80px'>
								<el-form-item :label='index+1+" "'>
									<span>{{q.context}}</span>
								</el-form-item>
								<el-form-item>
									<span :key='aindex' v-for="(a,aindex) in q.answer">
										<template v-if="q.type == 'r'">	
											<el-radio  label="a.text" >{{a.text}}</el-radio>
										</template>
										<template v-if="q.type == 'c'" >
											<el-checkbox  label="a.text" >{{a.text}}</el-checkbox>
										</template>
										<span>&nbsp;&nbsp;&nbsp;</span>
									</span>
								</el-form-item>
							</el-form>
						</div>
						<div v-show="activeIndex == index">
							<el-card class="box-card">
								<div slot="header" class="clearfix">
									<span>编辑问题</span>
									<template v-if='q.type == "c"'>
										<el-button type='text' @click="gaoji(index)">选项属性</el-button>
									</template>
								</div>
								<el-row :gutter="20">
									<el-form label-width='80px' :model='q'  :rules='questMainFormStore.questFormData.rules' :ref="'editform'+index+''">
										<el-form-item :label="index+1 +'题目'" prop='context'>
											<el-col :span='14'>
												<el-input size="mini" v-model="q.context"></el-input>
											</el-col>
											<el-col :span='5'>
												<el-button size='mini' @click='delquestion(index)'>删除此题</el-button>
											</el-col>
											<el-col :span='2'>
												<el-checkbox size='mini' v-model="q.mustdo" label="1" border>必选</el-checkbox>
											</el-col>
										</el-form-item>
											<el-form-item :key='oindex' v-for="(a,oindex) in q.answer" label='选项' prop='text'>
												<el-row :gutter="20">
									 	 		<el-col :span='14'><el-input size="mini" v-model="a.text"></el-input></el-col>
									 	 		<el-col :span='3'>	<el-button size="mini" @click='deleteas(index,oindex)'>删除</el-button></el-col>
									 	 		<el-col :span='2'><el-checkbox size='mini' v-model="a.ban" label="0" border>禁选</el-checkbox></el-col>
									 	 		</el-row>
									 	 	</el-form-item>
									 	 	<el-button size="mini" @click="activeClose('editform'+index,index)">保存</el-button>
									</el-form>
								</el-row>

								<!--
									
									<el-form label-width='80px' :model='a' :rules='questMainFormStore.questFormData.rules' :ref="'editopform'+oindex+''">
											
									 	
										
									</el-form>
								
								-->

								</br>

								<el-button size="mini" @click="addop(index)">添加选项</el-button>
								<el-dialog title="高级" :visible.sync="dialogFormVisible">
									<el-form label-width="100px">
										<el-form-item label="最多可选个数">
											<el-select v-model="q.max" size="mini" placeholder="最多可选个数">
												<el-option v-for="(item,tindex) in pageManagerStore.pageManagerData.data.tempOpt" :key="item.tindex" :label="item.label" :value="item.value">
												</el-option>
											</el-select>
										</el-form-item>
									</el-form>
									<div slot="footer" class="dialog-footer">
										<el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>
									</div>
								</el-dialog>
							</el-card>

						</div>
					</div>
				</template>
				<!-- =-=-=-=-=-=-=-=-=-=-=-=- -->
				<!-- 增加问题开始 -->
				<div v-show='addflag'>
					<el-card class="box-card">
						<div slot="header" class="clearfix">
							<span>增加问题</span>
							<template v-if="addQuestFormStore.addQuestFormData.data.type == 'c'">
								<el-button type='text' @click='addgaoji()'>选项属性</el-button>
							</template>
						</div>
						<el-row :gutter="20">
							<el-form label-width='80px' :model='addQuestFormStore.addQuestFormData.data' :rules='questMainFormStore.questFormData.rules'>
								<el-form-item label='题型'>
									<el-select v-model="addQuestFormStore.addQuestFormData.data.type" placeholder="请选择题型" size="mini">
										<el-option v-for="item in pageManagerStore.pageManagerData.data.options" :key="item.value" :label="item.label" :value="item.value">
										</el-option>
									</el-select>
								</el-form-item>
								<el-form-item label="题目" prop='context'>
									<el-col :span='14'>
										<el-input v-model='addQuestFormStore.addQuestFormData.data.context' size="mini"></el-input>
									</el-col>
									<el-col :span='2'>
										<el-checkbox size='mini' v-model="addQuestFormStore.addQuestFormData.data.mustdo" label="1" border>必选</el-checkbox>
									</el-col>
								</el-form-item>
							</el-form>
						</el-row>
						<template v-for="(ad,adindex) in addQuestFormStore.addQuestFormData.data.answer">
							<el-row :gutter="20">
								<el-form label-width='80px' :model='ad' :rules='questMainFormStore.questFormData.rules' ref="addform">
									<el-form-item label='选项' prop='text'>
										<el-col :span='14'>
											<el-input :key='adindex' size='mini' v-model='ad.text'></el-input>
										</el-col>
										<el-col :span='3'>
											<el-button size="mini" @click='deleteaddas(adindex)'>删除</el-button>
										</el-col>
										<el-col :span='2'>
											<el-checkbox size='mini' v-model="ad.ban" label="1" border>禁选</el-checkbox>
										</el-col>
									</el-form-item>
								</el-form>
							</el-row>
						</template>
						<el-dialog title="高级" :visible.sync="adialogFormVisible">
							<el-form label-width="100px">
								<el-form-item label="最多可选个数">
									<el-select v-model="addQuestFormStore.addQuestFormData.data.max" size="mini" placeholder="最多可选个数">
										<el-option v-for="(item,tindex) in pageManagerStore.pageManagerData.data.tempOpt" :key="item.tindex" :label="item.label" :value="item.value">
										</el-option>
									</el-select>
								</el-form-item>
							</el-form>
							<div slot="footer" class="dialog-footer">
								<el-button type="primary" @click="adialogFormVisible = false">确 定</el-button>
							</div>
						</el-dialog>
						<el-button size="mini" @click="addquestop()">添加选项</el-button>
						<br>
						<el-button size="mini" @click="addsave('addform')">保存</el-button>
						<el-button size="mini" @click='addcancle'>取消</el-button>
					</el-card>
				</div>
				<br>
				<el-button size="mini" @click='addquest'>增加问题</el-button>

				<br><br>
				<el-button type='primary' @click='testbutton'>
					保存问卷
				</el-button>
			</div>
		</div>
	</body>

</html>