<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>mytitle</title>
	</head>

	<body>
		<div id="bodyBox">
			<gc-container :component-store="pageHCon">
				<div slot="header">
				</div>
				<gc-manager :component-store="pmanager">
					<template slot="quickSearchItems">
						<el-form-item label="登录名" prop="userLoginName">
							<el-input v-model="serviceForm.bindMutual.data.userLoginName" size="mini"></el-input>
						</el-form-item>

					</template>
					<!-- 常用的操作-->
					<template slot="often">
						<!--<el-button type="info" title="更多条件" size="mini" @click="addUserInfoDV = true">新增</el-button>-->
						<el-button type="info" title="导出" size="mini">导出</el-button>
						<el-button type="info" title="导出" size="mini">打包</el-button>
					</template>
					<template slot="allSearchItems">
						<gc-form :component-store="moreForm">
							<el-form-item label="登录名" prop="name">
								<el-input v-model="moreForm.bindMutual.data.userLoginName" size="mini"></el-input>
							</el-form-item>
						</gc-form>
					</template>
					<template slot="dataCloumns">
						<el-table-column prop="userLoginName" min-width="60" label="登录名">
						</el-table-column>
						<el-table-column prop="name" label="姓名" min-width="60">
						</el-table-column>
						<el-table-column prop="officeOrgName" align='center' label="机构名称" min-width="60">
						</el-table-column>
						<el-table-column prop="memberCode" min-width="60" align='center' label="成员编号">
						</el-table-column>
						<el-table-column prop="startDate" min-width="60" align='center' label="开始日期">
						</el-table-column>
						<el-table-column prop="endDate" min-width="60" align='center' label="结束日期">
						</el-table-column>
						<el-table-column prop="available" min-width="60" align='center' label="是否可用" :formatter="formatAvailable">
						</el-table-column>
						<el-table-column prop="lastUpdateTime" min-width="90" align='center' label="最后修改时间">
						</el-table-column>
					</template>
				</gc-manager>
			</gc-container>

			<el-dialog title="分配职务" :visible.sync="resignationDV" width="70vw" top="3vh">

				<el-button v-if="addAndShowFlag" size="small" @click="allotDuty">分配职务</el-button>
				<el-button v-if="!addAndShowFlag" size="small" @click="addAndShowFlag = true">取消分配</el-button>
				<div style="border-bottom: 1px solid #F0F0F0;"></div>

				<div style="overflow-y:scroll;height:55vh;padding:0 3px">
					<div v-show="!addAndShowFlag">
						<el-form size="mini" :model="addUserDutyForm.formData.data" ref='addUserDutyForm' :rules='addUserDutyForm.formData.rules' label-width="80px">
							<el-form-item prop="loginName" label="登录名">
								{{addUserDutyForm.formData.data.loginName}}
							</el-form-item>
							<el-form-item prop="orgName" label="任职组织">
								{{addUserDutyForm.formData.data.orgName}}
							</el-form-item>
							<el-form-item prop="definitionCode" label="职务">
								<el-select v-model="addUserDutyForm.formData.data.definitionCode" size="small">
									<el-option v-for="(item,index) in dutyList" :key="index" :label="item.dutyName" :value="item.dutyCode">
									</el-option>
								</el-select>
							</el-form-item>
							<el-form-item prop="beginDate" label="开始时间">
								<el-date-picker format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd" v-model="addUserDutyForm.formData.data.beginDate" type="date" placeholder="选择日期">
								</el-date-picker>
							</el-form-item>
							<el-form-item prop="expireData" label="结束时间">
								<el-date-picker format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd" v-model="addUserDutyForm.formData.data.expireData" type="date" placeholder="选择日期">
								</el-date-picker>
							</el-form-item>
							<el-form-item prop="isBandh" label="是否禁用">
								<el-radio-group v-model="addUserDutyForm.formData.data.isBandh">
									<el-radio-button v-for="(item,index) in isBandh" :key="index" :label="item.dict_key">{{item.dict_desc}}</el-radio-button>
								</el-radio-group>
							</el-form-item>
						</el-form>
						<div>
							<el-button size="small" type="success" @click="addUserDuty">确 定</el-button>
							<el-button size="small" @click="addAndShowFlag = true">取 消</el-button>
						</div>
					</div>

					<el-table v-show="addAndShowFlag" size="small" :data="dutyTableData" style="width: 100%">

						<el-table-column prop="orgName" label="任职组织" width="90">
						</el-table-column>
						<el-table-column prop="targetUserTypeName" align='center' label="用户对象" min-width="90">
						</el-table-column>
						<el-table-column prop="definitionCode" align='center' label="职务代码" min-width="90">
						</el-table-column>
						<el-table-column prop="definitionName" align='center' label="职务名称" min-width="90">
						</el-table-column>
						<el-table-column prop="beginDate" align='center' label="开始日期" min-width="90">
						</el-table-column>
						<el-table-column prop="expireDate" align='center' label="结束日期" min-width="90">
						</el-table-column>
						<el-table-column prop="isBandh" align='center' label="是否停职" :formatter="formatIsBandh" min-width="90">
						</el-table-column>
						<el-table-column align='center' label="操作" min-width="120">
							<template slot-scope="scope">
								<el-button type="success" size="mini" @click="updateDuty(scope.$index, scope.row)">修 改</el-button>
								<el-button type="danger" size="mini" @click="deleteDuty(scope.$index, scope.row)">删 除</el-button>
							</template>
						</el-table-column>
					</el-table>

				</div>
				<span slot="footer" class="dialog-footer">
				    <el-button size="small" @click="resignationDV = false">关 闭</el-button>
  				</span>
			</el-dialog>
				
			<el-dialog title="修改" :visible.sync="updateUserDutyDV" width="70vw" top="3vh">
				<div style="overflow-y:scroll;height:55vh;padding:0 3px">
						<el-form size="mini" :model="updateUserDutyForm.formData.data" ref='updateUserDutyForm' :rules='updateUserDutyForm.formData.rules' label-width="80px">
							<el-form-item prop="loginName" label="登录名">
								{{updateUserDutyForm.formData.data.loginName}}
							</el-form-item>
							<el-form-item prop="orgName" label="任职组织">
								{{updateUserDutyForm.formData.data.orgName}}
							</el-form-item>
							<el-form-item prop="definitionCode" label="职务">
								<el-select v-model="updateUserDutyForm.formData.data.definitionCode" size="small">
									<el-option v-for="(item,index) in dutyList" :key="index" :label="item.dutyName" :value="item.dutyCode">
									</el-option>
								</el-select>
							</el-form-item>
							<el-form-item prop="beginDate" label="开始时间">
								<el-date-picker format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd" v-model="updateUserDutyForm.formData.data.beginDate" type="date" placeholder="选择日期">
								</el-date-picker>
							</el-form-item>
							<el-form-item prop="expireData" label="结束时间">
								<el-date-picker format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd" v-model="updateUserDutyForm.formData.data.expireData" type="date" placeholder="选择日期">
								</el-date-picker>
							</el-form-item>
							<el-form-item prop="isBandh" label="是否禁用">
								<el-radio-group v-model="updateUserDutyForm.formData.data.isBandh">
									<el-radio-button v-for="(item,index) in isBandh" :key="index" :label="item.dict_key">{{item.dict_desc}}</el-radio-button>
								</el-radio-group>
							</el-form-item>
						</el-form>
						<div>
							<el-button size="small" type="success" @click="updateUserDuty">确 定</el-button>
							<el-button size="small" @click="updateUserDutyDV = false">取 消</el-button>
						</div>
					</el-dialog>
				
				
				
			
				
		</div>
	</body>

</html>